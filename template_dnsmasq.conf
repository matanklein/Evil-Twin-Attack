# dnsmasq captive‑portal configuration

# serve DHCP/DNS on the captive‑portal interface
interface=[INTERFACE NAME]
bind-interfaces

# DHCP settings: hand out .2–.30 for 12 hours
dhcp-range=192.168.1.2,192.168.1.30,255.255.255.0,12h

# gateway (router) = .1
dhcp-option=3,192.168.1.1

# DNS server = .1               
dhcp-option=6,192.168.1.1

# upstream DNS fallback for non‑captive lookups
server=8.8.8.8

# DNS hijacking for captive portal detection
address=/www.apple.com/192.168.1.1
address=/captive.apple.com/192.168.1.1
address=/www.itools.info/192.168.1.1
address=/www.ibook.info/192.168.1.1
address=/connectivitycheck.gstatic.com/192.168.1.1
address=/connectivitycheck.android.com/192.168.1.1
address=/www.msftconnecttest.com/192.168.1.1
address=/www.msftncsi.com/192.168.1.1
address=/clients3.google.com/192.168.1.1

# blanket DNS hijack: everything → .1
address=/#/192.168.1.1

# logging
log-queries
log-dhcp

# management only on localhost
listen-address=127.0.0.1

# do not read /etc/resolv.conf
no-resolv